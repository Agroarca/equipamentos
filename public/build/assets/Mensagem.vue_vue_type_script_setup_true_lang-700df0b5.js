import{d as w,r as m,k as u,h as y,t as v,l,u as T,f as M,w as d,T as C,q as N,o as c,a}from"./app-b63c9c9f.js";import{_ as D}from"./Modal.vue_vue_type_script_setup_true_lang-e9b44080.js";import{r as _,t as p}from"./index-ac617c56.js";function I(e,t){return _(2,arguments),p(e).getTime()-p(t).getTime()}var x={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},V="trunc";function q(e){return e?x[e]:x[V]}function B(e,t,n){_(2,arguments);var r=I(e,t)/1e3;return q(n==null?void 0:n.roundingMethod)(r)}const S=["id"],j={key:0,class:"spinner-border spinner-border-sm text-secondary",role:"status"},A={key:1,class:"fa-solid fa-caret-down opcoes"},L={key:0,class:"menu-container"},P=a("button",{type:"button",class:"list-group-item list-group-item-danger"},"Fechar",-1),R=a("p",null,"Deseja realmente excluir esta mensagem?",-1),z={class:"alert alert-warning"},H=w({__name:"Mensagem",props:{mensagem:Object,usuarioId:Number,mensagensTempoExcluir:Number},emits:["excluirMensagem"],setup(e,{emit:t}){const n=e,r=m(null),s=m(!1);let o=m(g());h();function b(i){o.value&&(s.value=!s.value,i.stopPropagation(),window.addEventListener("click",f))}function f(i){document.querySelector(".mensagem .menu-container").contains(i.target)||(s.value=!1,window.removeEventListener("click",f))}function k(){r.value.hide(),t("excluirMensagem",n.mensagem)}function E(){r.value.show()}function g(){return n.mensagem.usuario_id!==n.usuarioId||n.mensagem.loading?!1:B(new Date,Date.parse(n.mensagem.created_at))<=n.mensagensTempoExcluir}function h(){o.value=g(),o.value&&setTimeout(()=>{h()},1e3)}return(i,F)=>(c(),u("span",{id:"msg-"+e.mensagem.id,class:N(["mensagem",{autor:e.mensagem.usuario_id==e.usuarioId}]),onClick:b},[y(v(e.mensagem.mensagem)+" ",1),e.mensagem.loading?(c(),u("div",j)):l("",!0),T(o)?(c(),u("i",A)):l("",!0),M(C,{name:"fade-500",duration:500},{default:d(()=>[s.value?(c(),u("div",L,[a("div",{class:"list-group"},[a("button",{type:"button",class:"list-group-item",onClick:E},"Excluir mensagem"),P])])):l("",!0)]),_:1}),M(D,{id:"modal_"+e.mensagem.id,ref_key:"modal",ref:r,title:"Excluir Mensagem"},{footer:d(()=>[a("button",{type:"button",class:"btn btn-danger",onClick:k},"Excluir")]),default:d(()=>[R,a("p",z,v(e.mensagem.mensagem),1)]),_:1},8,["id"])],10,S))}});export{H as _};
