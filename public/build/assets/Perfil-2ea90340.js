import{d as w,v as h,r as d,x as j,c as v,w as C,o as y,a as o,g as x,b as c,e as p,u as e,f as l}from"./app-f300bd32.js";import{M as f}from"./InputMask-357650c7.js";import{_ as t}from"./FormError.vue_vue_type_script_setup_true_lang-d15ab8de.js";import{_ as M}from"./SiteLayout.vue_vue_type_script_setup_true_lang-70917cc6.js";import"./_plugin-vue_export-helper-3cb4e753.js";import"./index-ac617c56.js";const V={class:"container perfil"},k=["onSubmit"],P=o("div",{class:"mb-3"},[o("h2",null,"Meu Perfil")],-1),N={class:"mb-3"},S=o("label",{for:"nome"},"Nome",-1),U={class:"mb-3"},g=o("label",{for:"email"},"E-mail",-1),A={class:"mb-3"},B=o("label",{for:"cpf_cnpj"},"CPF ou CNPJ",-1),D={class:"mb-3"},z=o("label",{for:"celular"},"Celular",-1),F={class:"mb-3"},$=o("label",{for:"password"},"Senha",-1),E=o("input",{id:"password",class:"form-control",type:"password",autocomplete:"new-password"},null,-1),J={class:"mb-3"},O=o("label",{for:"password_confirmation"},"Confirmar Senha",-1),T=o("input",{id:"password_confirmation",class:"form-control",type:"password",autocomplete:"new-password"},null,-1),q=o("div",{class:"mb-3"},[o("button",{class:"btn btn-primary",type:"submit"}," Atualizar ")],-1),R=w({__name:"Perfil",props:{user:Object},setup(_){const a=_,r=h({nome:a.user.nome,email:a.user.email,cpf_cnpj:a.user.cpf??a.user.cnpj,celular:a.user.celular,password:"",password_confirmation:""}),u=d(null),m=d(null);j(()=>{f.cpf_cnpj(u.value),f.telefone(m.value)});function b(){r.transform(i=>({...i,celular:i.celular.replaceAll(/\D/g,""),cpf_cnpj:i.cpf_cnpj.replaceAll(/\D/g,"")})).post("/perfil/atualizar",{onFinish:()=>r.reset("password","password_confirmation")})}return(i,s)=>(y(),v(M,{titulo:"Perfil"},{default:C(()=>[o("div",V,[o("form",{onSubmit:x(b,["prevent"])},[P,o("div",N,[S,c(o("input",{id:"nome","onUpdate:modelValue":s[0]||(s[0]=n=>e(r).nome=n),class:"form-control",type:"text",autocomplete:"nome"},null,512),[[p,e(r).nome]]),l(t,{error:e(r).errors.nome},null,8,["error"])]),o("div",U,[g,c(o("input",{id:"email","onUpdate:modelValue":s[1]||(s[1]=n=>e(r).email=n),class:"form-control",type:"email",autocomplete:"email"},null,512),[[p,e(r).email]]),l(t,{error:e(r).errors.email},null,8,["error"])]),o("div",A,[B,c(o("input",{id:"cpf_cnpj",ref_key:"elCpfCnpj",ref:u,"onUpdate:modelValue":s[2]||(s[2]=n=>e(r).cpf_cnpj=n),class:"form-control",type:"text",autocomplete:"cpf_cnpj"},null,512),[[p,e(r).cpf_cnpj]]),l(t,{error:e(r).errors.cpf_cnpj},null,8,["error"]),l(t,{error:e(r).errors.cpf},null,8,["error"]),l(t,{error:e(r).errors.cnpj},null,8,["error"])]),o("div",D,[z,c(o("input",{id:"celular",ref_key:"elCelular",ref:m,"onUpdate:modelValue":s[3]||(s[3]=n=>e(r).celular=n),class:"form-control",type:"text",autocomplete:"celular"},null,512),[[p,e(r).celular]]),l(t,{error:e(r).errors.celular},null,8,["error"])]),o("div",F,[$,E,l(t,{error:e(r).errors.password},null,8,["error"])]),o("div",J,[O,T,l(t,{error:e(r).errors.password_confirmation},null,8,["error"])]),q],40,k)])]),_:1}))}});export{R as default};
