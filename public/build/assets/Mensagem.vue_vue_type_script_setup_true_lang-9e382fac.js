import{d as w,r as c,k as i,h as y,t as v,l as m,u as T,f as M,w as l,T as C,q as N,o as u,a}from"./app-78c8b63e.js";import{_ as D}from"./Modal.vue_vue_type_script_setup_true_lang-a42be9d2.js";import{r as b,t as x}from"./index-ac617c56.js";function I(e,t){return b(2,arguments),x(e).getTime()-x(t).getTime()}var _={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},V="trunc";function q(e){return e?_[e]:_[V]}function B(e,t,n){b(2,arguments);var s=I(e,t)/1e3;return q(n==null?void 0:n.roundingMethod)(s)}const S=["id"],j={key:0,class:"spinner-border spinner-border-sm text-secondary",role:"status"},A={key:1,class:"fa-solid fa-caret-down opcoes"},L={key:0,class:"menu-container"},R=a("button",{type:"button",class:"list-group-item list-group-item-danger"},"Fechar",-1),z=a("p",null,"Deseja realmente excluir esta mensagem?",-1),F={class:"alert alert-warning"},H=w({__name:"Mensagem",props:{mensagem:Object,usuarioId:Number,mensagensTempoExcluir:Number},emits:["excluirMensagem"],setup(e,{emit:t}){const n=e,s=c(null),r=c(!1);let o=c(f());g();function p(){o.value&&(r.value=!r.value,setTimeout(()=>{window.addEventListener("click",d)},500))}function d(h){document.querySelector(".mensagem .menu-container").contains(h.target)||(r.value=!1,window.removeEventListener("click",d))}function k(){s.value.hide(),t("excluirMensagem",n.mensagem)}function E(){s.value.show()}function f(){return n.mensagem.usuario_id!==n.usuarioId||n.mensagem.loading?!1:B(new Date,Date.parse(n.mensagem.created_at))<=n.mensagensTempoExcluir}function g(){o.value=f(),o.value&&setTimeout(()=>{g()},1e3)}return(h,O)=>(u(),i("span",{id:"msg-"+e.mensagem.id,class:N(["mensagem",{autor:e.mensagem.usuario_id==e.usuarioId}]),onClick:p},[y(v(e.mensagem.mensagem)+" ",1),e.mensagem.loading?(u(),i("div",j)):m("",!0),T(o)?(u(),i("i",A)):m("",!0),M(C,{name:"fade-500",duration:500},{default:l(()=>[r.value?(u(),i("div",L,[a("div",{class:"list-group"},[a("button",{type:"button",class:"list-group-item",onClick:E},"Excluir mensagem"),R])])):m("",!0)]),_:1}),M(D,{id:"modal_"+e.mensagem.id,ref_key:"modal",ref:s,title:"Excluir Mensagem"},{footer:l(()=>[a("button",{type:"button",class:"btn btn-danger",onClick:k},"Excluir")]),default:l(()=>[z,a("p",F,v(e.mensagem.mensagem),1)]),_:1},8,["id"])],10,S))}});export{H as _};
