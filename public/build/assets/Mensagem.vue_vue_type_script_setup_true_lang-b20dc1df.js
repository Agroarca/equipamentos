import{d as y,r as l,k as u,h as T,t as M,l as d,u as C,f as p,w as f,T as N,q as D,o as c,a}from"./app-08945f31.js";import{_ as I}from"./Modal.vue_vue_type_script_setup_true_lang-6076af69.js";import{r as b,t as x}from"./index-ac617c56.js";function V(e,t){return b(2,arguments),x(e).getTime()-x(t).getTime()}var _={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},q="trunc";function B(e){return e?_[e]:_[q]}function S(e,t,n){b(2,arguments);var r=V(e,t)/1e3;return B(n==null?void 0:n.roundingMethod)(r)}const j=["id"],A={key:0,class:"spinner-border spinner-border-sm text-secondary",role:"status"},L={key:1,class:"fa-solid fa-caret-down opcoes"},P={key:0,class:"menu-container"},R=a("button",{type:"button",class:"list-group-item list-group-item-danger"},"Fechar",-1),z=a("p",null,"Deseja realmente excluir esta mensagem?",-1),F={class:"alert alert-warning"},H=y({__name:"Mensagem",props:{mensagem:Object,usuarioId:Number,mensagensTempoExcluir:Number},emits:["excluirMensagem"],setup(e,{emit:t}){const n=e,r=l(null),s=l(!1);let o=l(h());v();function k(i){o.value&&(s.value=!s.value,i.stopPropagation(),window.addEventListener("click",g))}function g(i){var m;(m=document.querySelector(".mensagem .menu-container"))!=null&&m.contains(i.target)||(s.value=!1,window.removeEventListener("click",g))}function E(){r.value.hide(),t("excluirMensagem",n.mensagem)}function w(){r.value.show()}function h(){return n.mensagem.usuario_id!==n.usuarioId||n.mensagem.loading?!1:S(new Date,Date.parse(n.mensagem.created_at))<=n.mensagensTempoExcluir}function v(){o.value=h(),o.value&&setTimeout(()=>{v()},1e3)}return(i,m)=>(c(),u("span",{id:"msg-"+e.mensagem.id,class:D(["mensagem",{autor:e.mensagem.usuario_id==e.usuarioId}]),onClick:k},[T(M(e.mensagem.mensagem)+" ",1),e.mensagem.loading?(c(),u("div",A)):d("",!0),C(o)?(c(),u("i",L)):d("",!0),p(N,{name:"fade-500",duration:500},{default:f(()=>[s.value?(c(),u("div",P,[a("div",{class:"list-group"},[a("button",{type:"button",class:"list-group-item",onClick:w},"Excluir mensagem"),R])])):d("",!0)]),_:1}),p(I,{id:"modal_"+e.mensagem.id,ref_key:"modal",ref:r,title:"Excluir Mensagem"},{footer:f(()=>[a("button",{type:"button",class:"btn btn-danger",onClick:E},"Excluir")]),default:f(()=>[z,a("p",F,M(e.mensagem.mensagem),1)]),_:1},8,["id"])],10,j))}});export{H as _};
