import{d as q,r as C,b as N,e as S,C as k,$ as U,c as j,w as B,o as c,a as e,D as d,E as m,u as a,h as l,H as D,g as f,j as E,t as $,F as A,G as F,q as v}from"./app.6cfc98da.js";import{A as O}from"./AdminLayout.1b6661b7.js";import{_ as s}from"./FormError.vue_vue_type_script_setup_true_lang.aca1c732.js";import{M as L}from"./InputMask.72bb5526.js";import{_ as b}from"./SelectAjax.vue_vue_type_script_setup_true_lang.c1cc834a.js";import"./_plugin-vue_export-helper.fcfd03a8.js";import"./index.c57ba517.js";const T=["onSubmit"],G={class:"card card-default"},H={class:"card-body"},z={class:"mb-3"},I=e("label",{for:"titulo"},"T\xEDtulo",-1),J={class:"mb-3"},K=e("label",{for:"valor"},"Valor",-1),P={class:"mb-3"},Q=e("label",{for:"ano"},"Ano",-1),R={class:"mb-3"},W=e("label",{for:"marca_id"},"Marca",-1),X={class:"mb-3"},Y=e("label",{for:"marca_id"},"Modelo",-1),Z={class:"mb-3"},oo=e("label",{for:"categoria_id"},"Categoria",-1),ao=["value"],eo=e("div",{class:"card-footer"},[e("button",{type:"submit",class:"btn btn-primary"}," Criar ")],-1),mo=q({__name:"Criar",props:{categorias:Object},setup(h){const u=C(null);let n,_;const V=N(()=>o.marca_id?"Selecione um Modelo":"Selecione uma marca");S(()=>{L.preco(u.value)});const o=k({titulo:"",valor:"",ano:"",marca_id:"",modelo_id:"",categoria_id:""});U(()=>o.marca_id,(i,r)=>{i!==r&&(o.modelo_id="")});async function M(){loader.show(),o.marca_id||await w(),o.modelo_id||await x(),o.post("/admin/equipamentos/salvar",{onFinish:()=>loader.hide()})}function y(i){n=i}function g(i){_=i}async function w(){let i=await v.post("/admin/marcas/salvar/ajax",{nome:n});o.marca_id=i.data.id}async function x(){let i=await v.post("/admin/modelos/salvar/ajax",{nome:_,marca_id:o.marca_id});o.modelo_id=i.data.id}return(i,r)=>(c(),j(O,{titulo:"Novo Equipamento"},{default:B(()=>[e("form",{onSubmit:F(M,["prevent"])},[e("div",G,[e("div",H,[e("div",z,[I,d(e("input",{id:"titulo","onUpdate:modelValue":r[0]||(r[0]=t=>a(o).titulo=t),class:"form-control",type:"text",required:""},null,512),[[m,a(o).titulo]]),l(s,{error:a(o).errors.titulo},null,8,["error"])]),e("div",J,[K,d(e("input",{id:"valor",ref_key:"elValor",ref:u,"onUpdate:modelValue":r[1]||(r[1]=t=>a(o).valor=t),class:"form-control",type:"text",required:""},null,512),[[m,a(o).valor]]),l(s,{error:a(o).errors.valor},null,8,["error"])]),e("div",P,[Q,d(e("input",{id:"ano","onUpdate:modelValue":r[2]||(r[2]=t=>a(o).ano=t),class:"form-control",type:"text",required:""},null,512),[[m,a(o).ano]]),l(s,{error:a(o).errors.ano},null,8,["error"])]),e("div",R,[W,l(b,{modelValue:a(o).marca_id,"onUpdate:modelValue":r[3]||(r[3]=t=>a(o).marca_id=t),placeholder:"Selecione uma marca",href:"/admin/marcas/pesquisar","criar-dinamica":!0,onCriarNovaOpcao:y},null,8,["modelValue"]),l(s,{error:a(o).errors.modelo_id},null,8,["error"])]),e("div",X,[Y,l(b,{modelValue:a(o).modelo_id,"onUpdate:modelValue":r[4]||(r[4]=t=>a(o).modelo_id=t),disabled:!(a(o).marca_id||a(n)),placeholder:a(V),href:a(o).marca_id?`/admin/modelos/pesquisar/${a(o).marca_id}`:null,"criar-dinamica":!0,onCriarNovaOpcao:g},null,8,["modelValue","disabled","placeholder","href"]),l(s,{error:a(o).errors.modelo_id},null,8,["error"])]),e("div",Z,[oo,d(e("select",{id:"categoria_id","onUpdate:modelValue":r[5]||(r[5]=t=>a(o).categoria_id=t),class:"form-select",required:""},[(c(!0),f(A,null,E(h.categorias,(t,p)=>(c(),f("option",{key:p,value:p},$(t),9,ao))),128))],512),[[D,a(o).categoria_id]]),l(s,{error:a(o).errors.categoria_id},null,8,["error"])])]),eo])],40,T)]),_:1}))}});export{mo as default};
