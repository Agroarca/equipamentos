{"version":3,"file":"Mensagem.vue_vue_type_script_setup_true_lang-3c810bec.js","sources":["../../../node_modules/date-fns/esm/differenceInMilliseconds/index.js","../../../node_modules/date-fns/esm/_lib/roundingMethods/index.js","../../../node_modules/date-fns/esm/differenceInSeconds/index.js","../../../resources/js/Pages/Site/Equipamento/Conversa/Componentes/Mensagem.vue"],"sourcesContent":["import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name differenceInMilliseconds\n * @category Millisecond Helpers\n * @summary Get the number of milliseconds between the given dates.\n *\n * @description\n * Get the number of milliseconds between the given dates.\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @returns {Number} the number of milliseconds\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many milliseconds are between\n * // 2 July 2014 12:30:20.600 and 2 July 2014 12:30:21.700?\n * const result = differenceInMilliseconds(\n *   new Date(2014, 6, 2, 12, 30, 21, 700),\n *   new Date(2014, 6, 2, 12, 30, 20, 600)\n * )\n * //=> 1100\n */\n\nexport default function differenceInMilliseconds(dateLeft, dateRight) {\n  requiredArgs(2, arguments);\n  return toDate(dateLeft).getTime() - toDate(dateRight).getTime();\n}","var roundingMap = {\n  ceil: Math.ceil,\n  round: Math.round,\n  floor: Math.floor,\n  trunc: function trunc(value) {\n    return value < 0 ? Math.ceil(value) : Math.floor(value);\n  } // Math.trunc is not supported by IE\n\n};\nvar defaultRoundingMethod = 'trunc';\nexport function getRoundingMethod(method) {\n  return method ? roundingMap[method] : roundingMap[defaultRoundingMethod];\n}","import differenceInMilliseconds from \"../differenceInMilliseconds/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nimport { getRoundingMethod } from \"../_lib/roundingMethods/index.js\";\n/**\n * @name differenceInSeconds\n * @category Second Helpers\n * @summary Get the number of seconds between the given dates.\n *\n * @description\n * Get the number of seconds between the given dates.\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @param {Object} [options] - an object with options.\n * @param {String} [options.roundingMethod='trunc'] - a rounding method (`ceil`, `floor`, `round` or `trunc`)\n * @returns {Number} the number of seconds\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many seconds are between\n * // 2 July 2014 12:30:07.999 and 2 July 2014 12:30:20.000?\n * const result = differenceInSeconds(\n *   new Date(2014, 6, 2, 12, 30, 20, 0),\n *   new Date(2014, 6, 2, 12, 30, 7, 999)\n * )\n * //=> 12\n */\n\nexport default function differenceInSeconds(dateLeft, dateRight, options) {\n  requiredArgs(2, arguments);\n  var diff = differenceInMilliseconds(dateLeft, dateRight) / 1000;\n  return getRoundingMethod(options === null || options === void 0 ? void 0 : options.roundingMethod)(diff);\n}","<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { differenceInSeconds } from 'date-fns'\nimport Modal from '@/Componentes/Layout/Modal.vue'\n\nconst props = defineProps({\n    mensagem: Object,\n    usuarioId: Number,\n    mensagensTempoExcluir: Number,\n})\nconst modal = ref(null)\nconst emit = defineEmits<{(e: 'excluirMensagem', value: Object): void}>()\nconst menuAberto = ref(false)\nlet podeExcluir = ref(getPodeExcluir())\nverificarpodeExcluir()\n\nfunction mostrarMenu(e) {\n    if (!podeExcluir.value) {\n        return\n    }\n    menuAberto.value = !menuAberto.value\n    e.stopPropagation()\n    window.addEventListener('click', fecharMenu)\n}\n\nfunction fecharMenu(e) {\n    if (!document.querySelector('.mensagem .menu-container')?.contains(e.target)) {\n        menuAberto.value = false\n        window.removeEventListener('click', fecharMenu)\n    }\n}\n\nfunction excluirMensagem() {\n    modal.value.hide()\n    emit('excluirMensagem', props.mensagem)\n}\n\nfunction abrirModal() {\n    modal.value.show()\n}\n\nfunction getPodeExcluir() {\n    if (props.mensagem.usuario_id !== props.usuarioId) {\n        return false\n    }\n\n    if (props.mensagem.loading) {\n        return false\n    }\n\n    return differenceInSeconds(new Date(), Date.parse(props.mensagem.created_at)) <= props.mensagensTempoExcluir\n}\n\nfunction verificarpodeExcluir() {\n    podeExcluir.value = getPodeExcluir()\n    if (podeExcluir.value) {\n        setTimeout(() => {\n            verificarpodeExcluir()\n        }, 1000)\n    }\n}\n\n</script>\n\n<template>\n    <span :id=\"'msg-' + mensagem.id\" class=\"mensagem\" :class=\"{ autor: mensagem.usuario_id == usuarioId }\" @click=\"mostrarMenu\">\n        {{ mensagem.mensagem }}\n        <div v-if=\"mensagem.loading\" class=\"spinner-border spinner-border-sm text-secondary\" role=\"status\" />\n        <i v-if=\"podeExcluir\" class=\"fa-solid fa-caret-down opcoes\" />\n        <Transition name=\"fade-500\" :duration=\"500\">\n            <div v-if=\"menuAberto\" class=\"menu-container\">\n                <div class=\"list-group\">\n                    <button type=\"button\" class=\"list-group-item\" @click=\"abrirModal\">Excluir mensagem</button>\n                    <button type=\"button\" class=\"list-group-item list-group-item-danger\">Fechar</button>\n                </div>\n            </div>\n        </Transition>\n        <Modal :id=\"'modal_' + mensagem.id\" ref=\"modal\" title=\"Excluir Mensagem\">\n\n            <p>Deseja realmente excluir esta mensagem?</p>\n            <p class=\"alert alert-warning\">{{ mensagem.mensagem }}</p>\n            <template #footer>\n                <button type=\"button\" class=\"btn btn-danger\" @click=\"excluirMensagem\">Excluir</button>\n            </template>\n\n        </Modal>\n    </span>\n</template>\n"],"names":[],"mappings":";;;AAyBe,SAAS,yBAAyB,UAAU,WAAW;AACpE,eAAa,GAAG,SAAS;AACzB,SAAO,OAAO,QAAQ,EAAE,QAAO,IAAK,OAAO,SAAS,EAAE;AACxD;AC5BA,IAAI,cAAc;AAAA,EAChB,MAAM,KAAK;AAAA,EACX,OAAO,KAAK;AAAA,EACZ,OAAO,KAAK;AAAA,EACZ,OAAO,SAAS,MAAM,OAAO;AAC3B,WAAO,QAAQ,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,MAAM,KAAK;AAAA,EACvD;AAAA;AAEH;AACA,IAAI,wBAAwB;AACrB,SAAS,kBAAkB,QAAQ;AACxC,SAAO,SAAS,YAAY,MAAM,IAAI,YAAY,qBAAqB;AACzE;ACgBe,SAAS,oBAAoB,UAAU,WAAW,SAAS;AACxE,eAAa,GAAG,SAAS;AACzB,MAAI,OAAO,yBAAyB,UAAU,SAAS,IAAI;AAC3D,SAAO,kBAAkB,YAAY,QAAQ,YAAY,SAAS,SAAS,QAAQ,cAAc,EAAE,IAAI;AACzG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBM,UAAA,QAAQ,IAAI,IAAI;AAEhB,UAAA,aAAa,IAAI,KAAK;AACxB,QAAA,cAAc,IAAI,eAAA,CAAgB;AACjB;AAErB,aAAS,YAAY,GAAG;AAChB,UAAA,CAAC,YAAY,OAAO;AACpB;AAAA,MACJ;AACW,iBAAA,QAAQ,CAAC,WAAW;AAC/B,QAAE,gBAAgB;AACX,aAAA,iBAAiB,SAAS,UAAU;AAAA,IAC/C;AAEA,aAAS,WAAW,GAAG;;AACf,UAAA,GAAC,cAAS,cAAc,2BAA2B,MAAlD,mBAAqD,SAAS,EAAE,UAAS;AAC1E,mBAAW,QAAQ;AACZ,eAAA,oBAAoB,SAAS,UAAU;AAAA,MAClD;AAAA,IACJ;AAEA,aAAS,kBAAkB;AACvB,YAAM,MAAM;AACP,WAAA,mBAAmB,MAAM,QAAQ;AAAA,IAC1C;AAEA,aAAS,aAAa;AAClB,YAAM,MAAM;IAChB;AAEA,aAAS,iBAAiB;AACtB,UAAI,MAAM,SAAS,eAAe,MAAM,WAAW;AACxC,eAAA;AAAA,MACX;AAEI,UAAA,MAAM,SAAS,SAAS;AACjB,eAAA;AAAA,MACX;AAEO,aAAA,oBAAwB,oBAAA,KAAQ,GAAA,KAAK,MAAM,MAAM,SAAS,UAAU,CAAC,KAAK,MAAM;AAAA,IAC3F;AAEA,aAAS,uBAAuB;AAC5B,kBAAY,QAAQ;AACpB,UAAI,YAAY,OAAO;AACnB,mBAAW,MAAM;AACQ;WACtB,GAAI;AAAA,MACX;AAAA,IACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","x_google_ignoreList":[0,1,2]}