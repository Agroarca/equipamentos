import{d as w,r as i,k as u,h as T,t as h,u as y,l as v,f as M,w as c,T as C,q as N,o as m,a}from"./app-f300bd32.js";import{_ as D}from"./Modal.vue_vue_type_script_setup_true_lang-013fa222.js";import{r as p,t as _}from"./index-ac617c56.js";function I(e,n){return p(2,arguments),_(e).getTime()-_(n).getTime()}var x={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(n){return n<0?Math.ceil(n):Math.floor(n)}},V="trunc";function q(e){return e?x[e]:x[V]}function B(e,n,t){p(2,arguments);var r=I(e,n)/1e3;return q(t==null?void 0:t.roundingMethod)(r)}const S=["id"],j={key:0,class:"fa-solid fa-caret-down opcoes"},A={key:0,class:"menu-container"},L=a("button",{type:"button",class:"list-group-item list-group-item-danger"},"Fechar",-1),R=a("p",null,"Deseja realmente excluir esta mensagem?",-1),z={class:"alert alert-warning"},G=w({__name:"Mensagem",props:{mensagem:Object,usuarioId:Number,mensagensTempoExcluir:Number},emits:["excluirMensagem"],setup(e,{emit:n}){const t=e,r=i(null),s=i(!1);let o=i(d());f();function b(){o.value&&(s.value=!s.value,setTimeout(()=>{window.addEventListener("click",l)},500))}function l(g){document.querySelector(".mensagem .menu-container").contains(g.target)||(s.value=!1,window.removeEventListener("click",l))}function k(){r.value.hide(),n("excluirMensagem",t.mensagem)}function E(){r.value.show()}function d(){return t.mensagem.usuario_id!==t.usuarioId?!1:B(new Date,Date.parse(t.mensagem.created_at))<=t.mensagensTempoExcluir}function f(){o.value=d(),o.value&&setTimeout(()=>{f()},1e3)}return(g,F)=>(m(),u("span",{id:"msg-"+e.mensagem.id,class:N(["mensagem",{autor:e.mensagem.usuario_id==e.usuarioId}]),onClick:b},[T(h(e.mensagem.mensagem)+" ",1),y(o)?(m(),u("i",j)):v("",!0),M(C,{name:"fade-500",duration:500},{default:c(()=>[s.value?(m(),u("div",A,[a("div",{class:"list-group"},[a("button",{type:"button",class:"list-group-item",onClick:E},"Excluir mensagem"),L])])):v("",!0)]),_:1}),M(D,{id:"modal_"+e.mensagem.id,ref_key:"modal",ref:r,title:"Excluir Mensagem"},{footer:c(()=>[a("button",{type:"button",class:"btn btn-danger",onClick:k},"Excluir")]),default:c(()=>[R,a("p",z,h(e.mensagem.mensagem),1)]),_:1},8,["id"])],10,S))}});export{G as _};
