import{d as w,r as o,g as u,i as T,t as h,u as y,m as v,h as M,w as c,T as C,B as N,o as m,a}from"./app.6cfc98da.js";import{_ as D}from"./Modal.vue_vue_type_script_setup_true_lang.a10f4c4f.js";import{r as p,t as _}from"./index.c57ba517.js";function I(e,n){return p(2,arguments),_(e).getTime()-_(n).getTime()}var x={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(n){return n<0?Math.ceil(n):Math.floor(n)}},B="trunc";function V(e){return e?x[e]:x[B]}function S(e,n,t){p(2,arguments);var r=I(e,n)/1e3;return V(t==null?void 0:t.roundingMethod)(r)}const j=["id"],q={key:0,class:"fa-solid fa-caret-down opcoes"},A={key:0,class:"menu-container"},L=a("button",{type:"button",class:"list-group-item list-group-item-danger"},"Fechar",-1),R=a("p",null,"Deseja realmente excluir esta mensagem?",-1),z={class:"alert alert-warning"},G=w({__name:"Mensagem",props:{mensagem:Object,usuarioId:Number,mensagensTempoExcluir:Number},emits:["excluirMensagem"],setup(e,{emit:n}){const t=e,r=o(null),s=o(!1);let i=o(d());f();function b(){!i.value||(s.value=!s.value,setTimeout(()=>{window.addEventListener("click",l)},500))}function l(g){document.querySelector(".mensagem .menu-container").contains(g.target)||(s.value=!1,window.removeEventListener("click",l))}function E(){r.value.hide(),n("excluirMensagem",t.mensagem)}function k(){r.value.show()}function d(){return t.mensagem.usuario_id!==t.usuarioId?!1:S(new Date,Date.parse(t.mensagem.created_at))<=t.mensagensTempoExcluir}function f(){i.value=d(),i.value&&setTimeout(()=>{f()},1e3)}return(g,F)=>(m(),u("span",{id:"msg-"+e.mensagem.id,class:N(["mensagem",{autor:e.mensagem.usuario_id==e.usuarioId}]),onClick:b},[T(h(e.mensagem.mensagem)+" ",1),y(i)?(m(),u("i",q)):v("",!0),M(C,{name:"fade-500",duration:500},{default:c(()=>[s.value?(m(),u("div",A,[a("div",{class:"list-group"},[a("button",{type:"button",class:"list-group-item",onClick:k},"Excluir mensagem"),L])])):v("",!0)]),_:1}),M(D,{id:"modal_"+e.mensagem.id,ref_key:"modal",ref:r,title:"Excluir Mensagem"},{footer:c(()=>[a("button",{type:"button",class:"btn btn-danger",onClick:E},"Excluir")]),default:c(()=>[R,a("p",z,h(e.mensagem.mensagem),1)]),_:1},8,["id"])],10,j))}});export{G as _};
