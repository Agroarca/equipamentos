import{d as k,m as d,c as w,i as r,s as E,t as g,u as y,k as f,g as h,w as i,T,I as C,o as u,b as a}from"./app.c3c88734.js";import{_ as I}from"./Modal.vue_vue_type_script_setup_true_lang.c987e0ce.js";import{r as p,t as M}from"./index.c57ba517.js";function N(e,n){return p(2,arguments),M(e).getTime()-M(n).getTime()}var _={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(n){return n<0?Math.ceil(n):Math.floor(n)}},D="trunc";function V(e){return e?_[e]:_[D]}function B(e,n,t){p(2,arguments);var s=N(e,n)/1e3;return V(t==null?void 0:t.roundingMethod)(s)}const S=["id"],j={key:0,class:"fa-solid fa-caret-down opcoes"},q={key:0,class:"menu-container"},A=a("button",{type:"button",class:"list-group-item list-group-item-danger"},"Fechar",-1),L=a("p",null,"Deseja realmente excluir esta mensagem?",-1),R={class:"alert alert-warning"},G=k({__name:"Mensagem",props:{mensagem:Object,usuarioId:Number,mensagensTempoExcluir:Number},emits:["excluirMensagem"],setup(e,{emit:n}){const t=e,s=d(null),o=d(!1);let c=w(()=>B(new Date,Date.parse(t.mensagem.created_at))<=t.mensagensTempoExcluir&&t.mensagem.usuario_id===t.usuarioId);function v(){!c.value||(o.value=!o.value,setTimeout(()=>{window.addEventListener("click",m)},500))}function m(l){document.querySelector(".mensagem .menu-container").contains(l.target)||(o.value=!1,window.removeEventListener("click",m))}function b(){s.value.hide(),n("excluirMensagem",t.mensagem)}function x(){s.value.show()}return(l,z)=>(u(),r("span",{id:"msg-"+e.mensagem.id,class:C(["mensagem",{autor:e.mensagem.usuario_id==e.usuarioId}]),onClick:v},[E(g(e.mensagem.mensagem)+" ",1),y(c)?(u(),r("i",j)):f("",!0),h(T,{name:"fade-500",duration:500},{default:i(()=>[o.value?(u(),r("div",q,[a("div",{class:"list-group"},[a("button",{type:"button",class:"list-group-item",onClick:x},"Excluir mensagem"),A])])):f("",!0)]),_:1}),h(I,{id:"modal_"+e.mensagem.id,ref_key:"modal",ref:s,title:"Excluir Mensagem"},{footer:i(()=>[a("button",{type:"button",class:"btn btn-danger",onClick:b},"Excluir")]),default:i(()=>[L,a("p",R,g(e.mensagem.mensagem),1)]),_:1},8,["id"])],10,S))}});export{G as _};
