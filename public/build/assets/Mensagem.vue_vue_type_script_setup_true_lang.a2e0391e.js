import{d as w,m as i,i as u,s as T,t as h,u as y,k as v,g as M,w as c,T as C,I,o as m,b as a}from"./app.f74497a6.js";import{_ as N}from"./Modal.vue_vue_type_script_setup_true_lang.a9034ee5.js";import{r as p,t as x}from"./index.c57ba517.js";function D(e,n){return p(2,arguments),x(e).getTime()-x(n).getTime()}var _={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(n){return n<0?Math.ceil(n):Math.floor(n)}},V="trunc";function B(e){return e?_[e]:_[V]}function S(e,n,t){p(2,arguments);var r=D(e,n)/1e3;return B(t==null?void 0:t.roundingMethod)(r)}const j=["id"],q={key:0,class:"fa-solid fa-caret-down opcoes"},A={key:0,class:"menu-container"},L=a("button",{type:"button",class:"list-group-item list-group-item-danger"},"Fechar",-1),R=a("p",null,"Deseja realmente excluir esta mensagem?",-1),z={class:"alert alert-warning"},G=w({__name:"Mensagem",props:{mensagem:Object,usuarioId:Number,mensagensTempoExcluir:Number},emits:["excluirMensagem"],setup(e,{emit:n}){const t=e,r=i(null),o=i(!1);let s=i(d());f();function b(){!s.value||(o.value=!o.value,setTimeout(()=>{window.addEventListener("click",l)},500))}function l(g){document.querySelector(".mensagem .menu-container").contains(g.target)||(o.value=!1,window.removeEventListener("click",l))}function E(){r.value.hide(),n("excluirMensagem",t.mensagem)}function k(){r.value.show()}function d(){return t.mensagem.usuario_id!==t.usuarioId?!1:S(new Date,Date.parse(t.mensagem.created_at))<=t.mensagensTempoExcluir}function f(){console.log("verificarpodeExcluir"),s.value=d(),s.value&&setTimeout(()=>{f()},1e3)}return(g,F)=>(m(),u("span",{id:"msg-"+e.mensagem.id,class:I(["mensagem",{autor:e.mensagem.usuario_id==e.usuarioId}]),onClick:b},[T(h(e.mensagem.mensagem)+" ",1),y(s)?(m(),u("i",q)):v("",!0),M(C,{name:"fade-500",duration:500},{default:c(()=>[o.value?(m(),u("div",A,[a("div",{class:"list-group"},[a("button",{type:"button",class:"list-group-item",onClick:k},"Excluir mensagem"),L])])):v("",!0)]),_:1}),M(N,{id:"modal_"+e.mensagem.id,ref_key:"modal",ref:r,title:"Excluir Mensagem"},{footer:c(()=>[a("button",{type:"button",class:"btn btn-danger",onClick:E},"Excluir")]),default:c(()=>[R,a("p",z,h(e.mensagem.mensagem),1)]),_:1},8,["id"])],10,j))}});export{G as _};
